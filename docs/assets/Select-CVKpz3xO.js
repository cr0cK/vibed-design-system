import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./index-C4lZkr4h.js";import{s as b,b as g}from"./buildVariants-CfwgwYun.js";const j=b.div(function(){return g({}).css({position:"relative",width:"100%",minWidth:0}).end()}),R=b.button(function(t){return g(t).css({width:"100%",minWidth:0,boxSizing:"border-box",minHeight:"2.48rem",borderRadius:"0.375rem",border:"1px solid color-mix(in oklab, var(--ds-color-border) 92%, #cfd6df)",padding:"0.6rem 2.1rem 0.6rem 0.75rem",fontSize:"0.95rem",lineHeight:1.2,fontFamily:"var(--ds-font-body)",backgroundColor:"var(--ds-color-surface)",color:"var(--ds-color-text)",cursor:t.disabled?"not-allowed":"pointer",textAlign:"left",transition:"border-color .16s ease, box-shadow .16s ease, background-color .16s ease",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative","&::after":{content:'""',position:"absolute",width:"0.82rem",height:"0.82rem",right:"0.72rem",top:"50%",transform:t.open?"translateY(-50%) rotate(180deg)":"translateY(-50%) rotate(0deg)",transition:"transform .14s ease",pointerEvents:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 20 20' fill='none' stroke='%238e98a7' stroke-width='1.7' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 8l4 4 4-4'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundSize:"0.82rem 0.82rem",backgroundPosition:"center"},"&:hover":{borderColor:t.disabled?"color-mix(in oklab, var(--ds-color-border) 88%, var(--ds-color-surface-muted))":"color-mix(in oklab, var(--ds-color-primary) 46%, var(--ds-color-border))"},"&:focus-visible":{outline:"none",borderColor:"var(--ds-color-primary)",boxShadow:t.disabled?"none":"0 0 0 2px color-mix(in oklab, var(--ds-color-primary) 18%, transparent)"},"&[data-open='true']":{borderColor:"var(--ds-color-primary)",boxShadow:"0 0 0 2px color-mix(in oklab, var(--ds-color-primary) 14%, transparent)"},"&[data-disabled='true']":{backgroundColor:"var(--ds-color-surface-muted)",color:"var(--ds-color-text-muted)",borderColor:"color-mix(in oklab, var(--ds-color-border) 88%, var(--ds-color-surface-muted))"}}).variant("controlSize",t.controlSize??"md",{sm:{minHeight:"2.05rem",padding:"0.45rem 1.9rem 0.45rem 0.65rem",fontSize:"0.875rem",lineHeight:1.2},md:{minHeight:"2.48rem",padding:"0.6rem 2.1rem 0.6rem 0.75rem",fontSize:"0.95rem",lineHeight:1.2},lg:{minHeight:"2.9rem",padding:"0.75rem 2.25rem 0.75rem 0.9rem",fontSize:"1rem",lineHeight:1.2}}).end()}),A=b.div(function(){return g({}).css({position:"absolute",zIndex:20,insetInline:0,top:"calc(100% + 0.25rem)",borderRadius:"0.5rem",border:"1px solid color-mix(in oklab, var(--ds-color-border) 88%, #d6dde7)",backgroundColor:"var(--ds-color-surface)",boxShadow:"0 8px 24px rgba(17, 24, 39, 0.12)",overflow:"hidden",transformOrigin:"top center",animation:"ds-select-layer-in .14s ease-out","@keyframes ds-select-layer-in":{from:{opacity:0,transform:"translateY(-4px) scale(0.99)"},to:{opacity:1,transform:"translateY(0) scale(1)"}},"@media (prefers-reduced-motion: reduce)":{animation:"none"}}).end()}),M=b.ul(function(){return g({}).css({listStyle:"none",margin:0,padding:"0.25rem",maxHeight:"15rem",overflowY:"auto"}).end()}),V=b.button(function(t){return g(t).css({width:"100%",border:"none",borderRadius:"0.35rem",padding:"0.4rem 0.6rem",margin:0,textAlign:"left",fontFamily:"var(--ds-font-body)",fontSize:"0.875rem",lineHeight:1.45,cursor:t.disabled?"not-allowed":"pointer",backgroundColor:t.selected?"color-mix(in oklab, var(--ds-color-primary) 16%, var(--ds-color-surface))":t.highlighted?"color-mix(in oklab, var(--ds-color-primary) 8%, var(--ds-color-surface))":"transparent",color:t.disabled?"var(--ds-color-text-muted)":"var(--ds-color-text)",transition:"background-color .12s ease, color .12s ease"}).variant("controlSize",t.controlSize??"md",{sm:{padding:"0.3rem 0.5rem",fontSize:"0.82rem",lineHeight:1.35},md:{padding:"0.4rem 0.6rem",fontSize:"0.875rem",lineHeight:1.45},lg:{padding:"0.52rem 0.7rem",fontSize:"0.95rem",lineHeight:1.5}}).end()});function D(e){const t=[],x=a.Children.toArray(e);for(const o of x){if(!a.isValidElement(o)||o.type!=="option")continue;const c=o.props.value,l=c!==void 0?String(c):"",y=o.props.children!==void 0?String(o.props.children):l,S=!!o.props.disabled;t.push({value:l,label:y,disabled:S})}return t}function T(e){var C;const t=a.useRef(null),x=a.useId(),o=e.id??x,c=`${o}-listbox`,l=a.useMemo(function(){return D(e.children)},[e.children]),y=e.value!==void 0?String(e.value):e.defaultValue!==void 0?String(e.defaultValue):((C=l[0])==null?void 0:C.value)??"",[S,k]=a.useState(y),[i,u]=a.useState(!1),[m,f]=a.useState(-1);a.useEffect(function(){e.value!==void 0&&k(String(e.value))},[e.value]),a.useEffect(function(){function n(d){t.current&&d.target instanceof Node&&!t.current.contains(d.target)&&u(!1)}return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[]);const h=e.value!==void 0?String(e.value):S,w=l.find(function(n){return n.value===h});function E(r){if(e.value===void 0&&k(r),e.onChange){const n={target:{value:r,name:e.name},currentTarget:{value:r,name:e.name}};e.onChange(n)}}function p(r){const n=l[r];!n||n.disabled||(E(n.value),f(r),u(!1))}function v(){if(e.disabled)return;const r=l.findIndex(function(d){return d.value===h});u(!0),f(r>=0?r:0)}function H(r){if(!e.disabled){if(r.key==="ArrowDown"){if(r.preventDefault(),!i){v();return}const n=Math.min(l.length-1,m+1);f(n);return}if(r.key==="ArrowUp"){if(r.preventDefault(),!i){v();return}const n=Math.max(0,m-1);f(n);return}if(r.key==="Enter"||r.key===" "){r.preventDefault(),i?m>=0&&p(m):v();return}r.key==="Escape"&&u(!1)}}return s.jsxs(j,{"data-attr-name":"Select",ref:t,children:[e.name?s.jsx("input",{type:"hidden",name:e.name,value:h}):null,s.jsx(R,{id:o,type:"button",disabled:e.disabled,controlSize:e.controlSize,"data-disabled":e.disabled?"true":"false","data-open":i?"true":"false",open:i,onClick:function(){e.disabled||(u(!i),i||v())},onKeyDown:H,"aria-haspopup":"listbox","aria-controls":i?c:void 0,"aria-expanded":i,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],"aria-describedby":e["aria-describedby"],"aria-required":e.required,"aria-invalid":e["aria-invalid"],children:w?w.label:""}),i?s.jsx(A,{children:s.jsx(M,{id:c,role:"listbox","aria-labelledby":o,children:l.map(function(n,d){const z=n.value===h,I=d===m;return s.jsx("li",{children:s.jsx(V,{type:"button",role:"option","aria-selected":z,controlSize:e.controlSize,selected:z,highlighted:I,disabled:n.disabled,onMouseEnter:function(){n.disabled||f(d)},onClick:function(){p(d)},children:n.label})},n.value)})})}):null]})}T.__docgenInfo={description:"Atom component that renders the Select primitive.",methods:[],displayName:"Select",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},controlSize:{required:!1,tsType:{name:"union",raw:'"sm" | "md" | "lg"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'}]},description:""}},composes:["SelectHTMLAttributes"]};export{T as S};
